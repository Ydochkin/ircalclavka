<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä IR - –Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px 15px 0 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .calculator {
            background: white;
            padding: 30px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .metric-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .metric-title {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .metric-weight {
            background: #3498db;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
        }
        
        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            margin-bottom: 30px;
        }
        
        .result-container {
            display: none;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
        }
        
        .ir-score {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .score-red { background: #ffebee; color: #c62828; border: 3px solid #ffcdd2; }
        .score-yellow { background: #fff8e1; color: #f57f17; border: 3px solid #ffecb3; }
        .score-green { background: #e8f5e9; color: #2e7d32; border: 3px solid #c8e6c9; }
        
        .metrics-breakdown {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .metric-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        @media (max-width: 768px) {
            .metric-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞</h1>
            <div class="subtitle">–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã ‚Ä¢ –Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞</div>
        </div>
        
        <div class="calculator">
            <div class="metric-group">
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">–†–µ–≥–∏–æ–Ω</div>
                    </div>
                    <select id="region">
                        <option value="moscow">–ú–æ—Å–∫–≤–∞</option>
                        <option value="regional">–°–ü–± –∏ –†–µ–≥–∏–æ–Ω—ã</option>
                    </select>
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">–¢–µ–∫—É—á–µ—Å—Ç—å (%)</div>
                        <div class="metric-weight">10%</div>
                    </div>
                    <input type="number" id="turnover" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ %">
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">SLA –∫—É—Ö–æ–Ω—å (%)</div>
                        <div class="metric-weight">15%</div>
                    </div>
                    <input type="number" id="sla" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ %">
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">Kfull</div>
                        <div class="metric-weight">20%</div>
                    </div>
                    <input type="number" id="kfull" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">Defect rate (%)</div>
                        <div class="metric-weight">15%</div>
                    </div>
                    <input type="number" id="defect" step="0.01" placeholder="–í–≤–µ–¥–∏—Ç–µ %">
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">Writeoffs (%)</div>
                        <div class="metric-weight">5%</div>
                    </div>
                    <input type="number" id="writeoffs" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ %">
                </div>
                
                <div class="metric">
                    <div class="metric-header">
                        <div class="metric-title">IPMH</div>
                        <div class="metric-weight">35%</div>
                    </div>
                    <input type="number" id="ipmh" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateIR()">
                üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
            </button>
            
            <div id="result" class="result-container"></div>
        </div>
    </div>

    <script>
        function calculateIR() {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
            const region = document.getElementById('region').value;
            const turnover = parseFloat(document.getElementById('turnover').value);
            const sla = parseFloat(document.getElementById('sla').value);
            const kfull = parseFloat(document.getElementById('kfull').value);
            const defect = parseFloat(document.getElementById('defect').value);
            const writeoffs = parseFloat(document.getElementById('writeoffs').value);
            const ipmh = parseFloat(document.getElementById('ipmh').value);

            // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –±–∞–ª–ª–∞ —Å –¢–û–ß–ù–´–ú–ò –ø–æ—Ä–æ–≥–∞–º–∏
            function getScore(value, metricType) {
    if (isNaN(value)) return 0;
    
    switch(metricType) {
        case 'turnover':
            if (value > 30) return 1;
            if (value <= 30 && value > 20) return 2;
            if (value <= 20 && value > 17) return 3;
            if (value <= 17 && value > 13) return 4;
            if (value <= 13) return 5;
            break;
            
        case 'sla':
            if (value < 87) return 1;
            if (value >= 87 && value < 90) return 2;
            if (value >= 90 && value < 92) return 3;
            if (value >= 92 && value < 95.5) return 4;
            if (value >= 95.5) return 5;
            break;
            
        case 'kfull':
            if (value > 10) return 1;
            if (value <= 10 && value > 9) return 2;
            if (value <= 9 && value > 7.5) return 3;
            if (value <= 7.5 && value > 6.5) return 4;
            if (value <= 6.5) return 5;
            break;
            
        case 'defect':
            if (value > 0.25) return 1;
            if (value <= 0.25 && value > 0.2) return 2;
            if (value <= 0.2 && value > 0.16) return 3;
            if (value <= 0.16 && value > 0.12) return 4;
            if (value <= 0.12) return 5;
            break;
            
        case 'writeoffs':
            if (value > 2) return 1;
            if (value <= 2 && value > 1.5) return 2;
            if (value <= 1.5 && value > 1.3) return 3;
            if (value <= 1.3 && value > 1.1) return 4;
            if (value <= 1.1) return 5;
            break;
            
        case 'ipmh_moscow':
            if (value <= 9) return 1;
            if (value > 9 && value <= 9.5) return 2;
            if (value > 9.5 && value <= 9.8) return 3;
            if (value > 9.8 && value <= 10.3) return 4;
            if (value > 10.3) return 5;
            break;
            
        case 'ipmh_regional':
            if (value <= 7.5) return 1;
            if (value > 7.5 && value <= 8) return 2;
            if (value > 8 && value <= 8.3) return 3;
            if (value > 8.3 && value <= 8.8) return 4;
            if (value > 8.8) return 5;
            break;
    }
    return 0;
}

            // –†–∞—Å—á–µ—Ç –±–∞–ª–ª–æ–≤
            const scores = {
                turnover: getScore(turnover, 'turnover'),
                sla: getScore(sla, 'sla'),
                kfull: getScore(kfull, 'kfull'),
                defect: getScore(defect, 'defect'),
                writeoffs: getScore(writeoffs, 'writeoffs'),
                ipmh: region === 'regional' ? getScore(ipmh, 'ipmh_regional') : getScore(ipmh, 'ipmh_moscow')
            };

            // –í–µ—Å–∞
            const weights = {
                turnover: 0.10, sla: 0.15, kfull: 0.20, 
                defect: 0.15, writeoffs: 0.05, ipmh: 0.35
            };

            // –†–∞—Å—á–µ—Ç IR
            let totalIR = 0;
            const contributions = {};
            
            for (const metric in scores) {
                contributions[metric] = scores[metric] * weights[metric];
                totalIR += contributions[metric];
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞
            let scoreClass = 'score-green';
            let scoreText = '–û—Ç–ª–∏—á–Ω–æ';
            if (totalIR < 3) {
                scoreClass = 'score-red';
                scoreText = '–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è';
            } else if (totalIR < 3.95) {
                scoreClass = 'score-yellow';
                scoreText = '–•–æ—Ä–æ—à–æ';
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <div class="ir-score ${scoreClass}">
                    <div>–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: ${totalIR.toFixed(2)}</div>
                    <div style="font-size: 0.8em;">${scoreText}</div>
                </div>
                <div class="metrics-breakdown">
                    ${Object.keys(scores).map(metric => `
                        <div class="metric-result">
                            <div>
                                <div style="font-weight: 600;">${getMetricName(metric)}</div>
                                <div style="font-size: 0.9em; color: #666;">
                                    –í–µ—Å: ${(weights[metric] * 100)}% ‚Ä¢ –ë–∞–ª–ª: ${scores[metric]} ‚Ä¢ –ó–Ω–∞—á–µ–Ω–∏–µ: ${getMetricValue(metric)}
                                </div>
                            </div>
                            <div style="font-weight: 600;">+${contributions[metric].toFixed(2)}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            resultDiv.style.display = 'block';
        }

        function getMetricName(metric) {
            const names = {
                turnover: '–¢–µ–∫—É—á–µ—Å—Ç—å',
                sla: 'SLA –∫—É—Ö–æ–Ω—å',
                kfull: 'Kfull',
                defect: 'Defect rate',
                writeoffs: 'Writeoffs',
                ipmh: 'IPMH'
            };
            return names[metric] || metric;
        }

        function getMetricValue(metric) {
            const value = document.getElementById(metric).value;
            const element = document.getElementById(metric);
            return element ? value + (element.type === 'number' ? (metric.includes('sla') || metric.includes('turnover') || metric.includes('defect') || metric.includes('writeoffs') ? '%' : '') : '') : '0';
        }
    </script>
</body>
</html>
